<html>
<head>
<title>Stack The Blocks</title>

<script src ="https://cdn.jsdelivr.net/npm/phaser@3.22.0/dist/phaser.min.js"></script>

</head>
<body>
<h1>Crate Towers</h1>
<script>
    var timer = 300;
    var timerText;

    var config = {
        type: Phaser.AUTO,
        width: 640,
        height: 960,
        physics: {
            default: 'matter',
        },
        scene: {
            preload: preload,
            create: create,
            update: update
        }
    };
    
    var game = new Phaser.Game(config);
    
    function preload ()
    {
        this.load.image('air', 'assets/air.png');
        this.load.image('box', 'assets/box.png');
        this.load.image('dirt', 'assets/dirt.png');
        this.load.image('dirt2', 'assets/dirt2.png');
        this.load.image('grass', 'assets/grass.png');
        this.load.image('grass2', 'assets/grass2.png');
        this.load.image('box', 'assets/box.png')

    }

    function countDown () {

        timer = timer - 1;
        
        timerText.setText('Time: ' + timer);

    };


    function create ()
    {

    

        var air = this.add.image(400, 300, 'air');
        air.displayWidth = game.config.width*2;
        air.displayHeight = game.config.height*2;

        var dirt2 = this.add.image(320, 960, 'dirt2');
        dirt2.displayWidth = game.config.width*.5;
        dirt2.displayHeight = game.config.height*.6;

        var grass2 = this.add.image(320, 700, 'grass2');
        grass2.displayWidth = game.config.width*.5;
 
        this.player =  this.add.image(30, 100, 'box');
        
        var clock = this.time.addEvent({repeat: 299, delay: 1000, callback: countDown});

        
        timerText = this.add.text(16, 16, 'time: 300', { fontSize: '32px', fill: '#000' }); 

        this.tweens.add({
            targets: this.player,
            x:610,
            duration:1200,
            ease:'Expo.Solid',
            repeat:-1,
            yoyo:true,

        });


    }

    function update ()
    {
        if (timer  < 1)
        {
            alert('game over');
        };
    };

</script>
</body>
</html>